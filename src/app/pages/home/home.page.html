<ion-header mode="ios">

  <ion-toolbar>

    <ion-buttons slot="start">

      <ion-menu-button></ion-menu-button>

    </ion-buttons>

    <ion-title>Início</ion-title>

  </ion-toolbar>

</ion-header>

<ion-content color="light">

  <ion-grid class="animate__animated animate__fadeIn" *ngIf="dashboard">

    <ion-row>

      <ion-col class="animate__animated animate__fadeIn" size-xs="12" size-md="6">

        <ion-card>

          <ion-card-header>

            <ion-card-title>Total Faturado: {{ dashboard.billed | money }}</ion-card-title>

            <ion-card-subtitle>Meta: {{ dashboard.goal | money }}</ion-card-subtitle>

          </ion-card-header>

          <ion-card-content>

            <ion-progress-bar [value]="dashboard.billed / dashboard.goal" color="primary"></ion-progress-bar>

            <span class="progress-value">{{ (dashboard.billed * 100 / dashboard.goal) | number:'1.1-2' }}%</span>

            <ion-note class="animate__animated animate__fadeIn animate__infinite">Falta {{ (dashboard.goal - dashboard.billed) | money }} para você cumprir sua meta</ion-note>

          </ion-card-content>

        </ion-card>

      </ion-col>

      <ion-col class="animate__animated animate__fadeIn" size-xs="12" size-md="6">

        <ion-card>

          <ion-card-header>

            <ion-card-title>Total de clientes: {{ dashboard.total_customers }} <ion-button fill="clear" size="small">Ver todos</ion-button></ion-card-title>

            <ion-card-subtitle>Positivados: {{ dashboard.total_positive_customers }}</ion-card-subtitle>

          </ion-card-header>

          <ion-card-content>

            <ion-progress-bar [value]="dashboard.total_positive_customers / dashboard.total_customers" color="primary"></ion-progress-bar>

            <span class="progress-value">{{ (dashboard.total_positive_customers * 100 / dashboard.total_customers) | number:'1.1-2' }}%</span>

            <ion-note class="animate__animated animate__fadeIn animate__infinite">Falta {{ dashboard.total_customers - dashboard.total_positive_customers }} para você cumprir sua meta!</ion-note>

          </ion-card-content>

        </ion-card>

      </ion-col>

      <ion-col class="animate__animated animate__fadeIn" size="12">

        <ion-card class="customers">

          <ion-card-header>

            <ion-card-title>Clientes</ion-card-title>

          </ion-card-header>

          <ion-card-content>

            <ion-searchbar placeholder="Buscar" (ionChange)="searchChanged($event)" (ionClear)="customers = []"></ion-searchbar>

            <div class="ion-scroll">

              <ion-list>

                <ion-item lines="none" *ngIf="noloader">

                  <ion-label class="ion-text-center">

                    <ion-spinner name="dots" color="primary"></ion-spinner>

                  </ion-label>

                </ion-item>

                <ion-item lines="full" button="true" detail="true" *ngFor="let customer of customers" (click)="selectCustomer(customer)">

                  <ion-label class="ion-text-wrap">{{ customer.razao_social }}</ion-label>

                </ion-item>

              </ion-list>

            </div>

          </ion-card-content>

        </ion-card>

      </ion-col>

    </ion-row>

  </ion-grid>

</ion-content>

<app-loader *ngIf="!noloader"></app-loader>